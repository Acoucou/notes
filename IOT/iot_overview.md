# 物联网综述



所谓物联网是指把所有物品通过射频识别等信息传感设备与互联网连接起来，从而实现智能化识别和管理，是继计算机、互联网和移动通信之后的又一次信息产业的革命性发展。

以信息感知为特征的物联网被称为世界信息产业的第三次浪潮，在人类生活和生产服务中具有更加广阔的应用前景。物联网已经成为我国的战略性新兴产业。



## 物联网的定义



物联网（Internet of Things， IOT；也称为 Web of Things）是指通过各种信息传感设备，如传感器、射频识别（RFID）技术、全球定位系统、红外感应器、激光扫描器、气体感应器等各种装置与技术，

实时对任何需要监控、连接、互动的物体或过程，采集其声、光、热、电、力学、化学、生物、位置等各种需要的信息，与互联网结合形成的一个巨大网络。

其目的是实现物与物、物与人，所有的物品与网络的连接，方便识别、管理和控制。  



## 物联网的体系架构  



从技术架构上来看，物联网可分为 3 层：**感知层**、**网络层**和**应用层**  



物联网整体框架  : 

![物联网整体框架](https://gitee.com/cpu_code/picture_bed/raw/master//20200828220158.png)



**感知层**由 各种传感器 及 传感器网关 构成，包括二氧化碳浓度传感器、温度传感器、湿度传感器、二维码标签、 RFID 标签和读/写器、摄像头、 GPS 等感知终端。感知层的作用相当于人的眼、耳、鼻、喉和皮肤等神经末梢，其主要功能是识别物体和采集信息。

**网络层**由各种私有网络、互联网、有线 和 无线通信网、网络管理系统 和 云计算平台等组成，相当于人的神经中枢和大脑，负责传递和处理感知层获取的信息。

**应用层**是物联网和用户（包括人、组织和其他系统）的接口，它与行业需求结合，实现物联网的智能应用。  





### IEEE 物联网标准进展  



在物联网的感知层研究领域， IEEE 的重要地位显然是毫无争议的。目前无线传感网领域用得比较多的 ZigBee 技术就基于 IEEE 802.15.4 标准。

IEEE 802 系列标准是 IEEE 802 LAN/MAN 标准委员会制订的局域网、城域网技术标准。 1998 年， IEEE802.15 工作组成立，专门从事无线个人局域网（WPAN）标准化工作。在 IEEE 802.15 工作组内有 5 个任务组，

分别制订适合不同应用的标准。这些标准在传输速率、功耗和支持的服务等方面存在差异。

TG1 组制订 IEEE 802.15.1 标准，即蓝牙无线通信标准。标准适用于手机、 PDA 等设备的中等速率、短距离通信。

TG2 组制订 IEEE 802.15.2 标准，研究 IEEE 802.15.1 标准与 IEEE 802.11 标准的共存。

TG3 组制订 IEEE 802.15.3 标准，研究超宽带（UWB）标准，标准适用于个人局域网中多媒体方面高速率、近距离通信的应用。

TG4 组制订 IEEE 802.15.4 标准，研究低速无线个人局域网。该标准把低能量消耗、低速率传输、低成本作为重点目标，旨在为个人或者家庭范围内不同设备之间的低速互联提供统一标准。

TG5 组制订 IEEE 802.15.5 标准，研究无线个人局域网的无线网状网（MESH）组网。该标准旨在研究提供 MESH 组网的 WPAN 的物理层与 MAC 层的必要的机制。

传感器网络的特征与低速无线个人局域网有很多相似之处，因此传感器网络大多采用 IEEE

802.15.4 标准作为物理层和媒体存取控制层（MAC），其中最为著名的就是 ZigBee。因此， IEEE的802.15工作组也是目前物联网领域在无线传感网层面的主要标准组织之一。中国也参与了IEEE802.15.4 系列标准的制订工作，其中 IEEE 802.15.4c 和 IEEE 802.15.4e 主要由中国起草。 IEEE802.15.4c 扩展了适合中国使用的频段， IEEE 802.15.4e 扩展了工业级控制部分。  



## 物联网与云计算  



云计算是物联网发展的核心，并且从两个方面促进物联网的实现。

首先，云计算是实现物联网的核心，运用云计算模式使物联网中以兆计算的各类物品的实时动态管理和智能分析变得可能。

物联网通过将射频识别技术、传感技术、纳米技术等新技术充分运用在各个行业中，将各种物体充分连接，并通过无线网络将采集到的各种实时动态信息送达计算机处理中心进行汇总、分析和处理，建设物联网的三大基石包括：  

（1）传感器等电子元器件。

（2）传输的通道，比如电信网。

（3）高效的、动态的、可以大规模扩展的技术资源处理能力。



其中第三个基石： “高效的、动态的、可以大规模扩展的技术资源处理能力”，正是通过云计算模式帮助实现的。

其次，云计算可促进物联网和互联网的智能融合，从而构建智慧地球。物联网和互联网的融合，需要更高层次的整合，需要“更透彻的感知、更安全的互联互通、更深入的智能化”。这同样需要依靠高效的、动态的、可以大规模扩展的技术资源处理能力，而这正是云计算模式所擅长的。同时，采用云计算的创新型服务交付模式，可以简化服务的交付，加强物联网和互联网之间及其内部的互联互通；可以实现新商业模式的快速创新，促进物联网和互联网的智能融合。

把物联网和云计算放在一起，是因为物联网和云计算的关系非常密切。

物联网的四大组成部分：感应识别、网络传输、管理服务 和 综合应用，其中中间两个部分就会利用到云计算。特别是“管理服务”这一项，因为这里有海量的数据存储和计算的要求，使用云计算可能是最省钱的一种方式。  



## 物联网与智能处理  



物联网智能信息处理的目标是将 RFID、传感器和执行器信息收集起来，通过数据挖掘等手段从这些原始信息中提取有用信息，为创新型服务提供技术支持。

物联网智能信息处理同互联网中其他智能信息处理方法有很多相似之处。同时物联网也有自身的特点，比如，物联网内传感结点所采集的信息具有明显的时间先后关系。因此，物联网中的信息处理较互联网中的信息处理所面临的挑战会更大。  





#物联网案例



## 车道收费系统



### 系统概述  



两个方向各安装了一条 ETC 车道，并辅以 MTC 车道 和 “ 两片式标签+双界面 CPU 卡 ” 结构的车载单元，形成以采用开放收费机制的组合式收费系统  



###　系统结构



双向 8 车道（每个方向 4 车道）。

内侧 1车道为军、警专用无障碍免费车道； 

2 车道为 ETC 车道； 

3车道为 MTC 人工备用车道，是在原有现金和非接触 IC 卡收费车道基础上增加 组合式收费系统的非接触刷卡终端 而成的（该新增终端与原有非接触 IC 卡终端不兼容）；

4 车道仍采用 原有现金 或 非接触 IC 卡刷卡方式收费。  



组合式收费系统的软硬件总体模板包含 **收费车道**、**收费站** 和 **管理中心** 3 个层次，而以硬盘录像机为核心的车道监控系统则为一个独立于收费系统且纵贯收费车道、收费站和管理中心和车道监控系统。

（ 1）收费车道。与组合式收费有关的收费车道为 **ETC 车道**和 **MTC 人工备用**车道，其中 ETC 车道包含车道计算机、车道控制器、天线与天线控制器、自动栏杆、车辆检测器、车道通行灯、费额显示器和声光报警器等； MTC 车道则是在不做任何改动的原有收费车道上增加两台专用非接触 IC 卡读卡器（收费终端）而成，以充分利用车道原有设施。

（ 2）收费站。进行收费和车流数据的通信、保存和查询，包括收费站服务器、管理工作站和各种数据传输接口等。

（ 3）管理中心。进行数据汇总和与用户服务有关的账户管理、密钥管理及 IC 卡与标签的发放等工作，包含中心服务器、用户工作站和发卡机等。

（ 4）车道监控系统。字符叠加器将车道计算机提供的收费数据等信息，叠加显示于车道摄像机。重新插入信息传输卡，再次导入信息，标签才生效。  



### 运营模式



运营模式及特点有以下 3 点：

（ 1）双界面 CPU 卡（记账卡）和 标签 由公司发行，用户在申请办理时，需交纳一定数量的保证金，以降低管理方运营风险；同时给用户一定优惠，以弥补其预付金的利息损失。

（ 2）用户将记账卡插入安装于车辆挡风玻璃上的标签，即可在 ETC 专用车道享受不停车收费服务；当ETC 车道进行故障维护时，可拔卡在 MTC 备用车道的非接触读卡机上“刷卡”付费，从而保证系统运行的可靠性。

（ 3）后台结算系统处理每天的收费数据、打印报表，并在规定的时间段内统计用户的通行费，从用户账户划转。  



## 智能农业系统  



### 系统概述  



智能农业系统通过安装空气温湿度、光照度、土壤温度、土壤湿度等传感器实时监测农业现场内的环境参数，之后由程序后台进行分析，与事先设置的系统规则进行对比，从而智能启动通风设施和滴灌设施，实现农业的精细化管理。

系统部署的主要设备有：光照传感器、空气温湿度传感器、土壤温度传感器、土壤湿度传感器、前置机、边缘网关、控制执行设备、 3G 无线网络传输设备等。  





### 系统功能  



该智能农业系统包含 3 套功能子系统，以网页形式提供给用户使用



1 ) 用户操作子系统 : 

1.  用户登录时的身份验证功能 :  只有输入正确的用户名和密码才可以登录并使用该系统。
2.  视频功能 :  系统能够显示现场布置的各摄像头中的内容，并可以远程控制摄像头。
3.  报警功能 :  能够判断各类数据是否在正常范围内，如果超出正常范围，则报警提示，并填写数据库中的错误日志。
4.  报警处理功能 :  用户如果已经注意到某报警，可以标记报警提示，系统会在数据库中记录为已处理。
5.  智能展示功能 :  可以直观地展示传感器采集的数据，包括实时显示现场温湿度等数据的分布和每种数据的历史数据。
6.  阈值设置功能 :  可以设置各种传感器的阈值，即上下限，系统判断数据的合法性即根据此阈值。



2）用户管理子系统 : 

1.  用户登录时的身份验证功能 :  只有输入正确的用户名和密码才可以登录并使用该网站。
2.  用户密码管理 :  提供用户修改当前设置的密码的功能。
3.  查看授权设备 :  提供用户查看自己被授权设备清单的功能。



3）系统管理子系统 : 



（ 1）客户管理 : 

添加客户：必须通过业务管理平台添加后，客户才有权利进入视频监控系统。客户注册信息是通过邮件获取，密码皆为 MD5 加密，管理员无法获得客户密码。对于违约和未缴费客户，管理员可以通过设置客户进入黑名单，禁止该客户登录平台。取消黑名单，该客户可以再次进入系统。

删除客户：客户被删除后，则不能再登录到视频监控系统。

在线客户：管理员可以查询出哪些客户在线，统计客户的在线信息，以方便运营和管理。



（ 2）设备管理 : 

添加设备：必须通过业务管理平台添加后，设备才有权利进入视频监控系统。

删除设备：设备被删除后，则不能再注册到视频监控系统。

在线设备：管理员可以查询哪些设备在线，统计设备的在线信息，以方便运营和管理。



（ 3）设备权限 : 

客户和设备建立权限：客户和设备原本没有权限关系，若客户要远程查看某一设备的信息，必须先获取授权才行。

客户和设备权限改变：客户和设备之间有多种权限，系统默认对视频设备只有视频连接和查看远程录像的权限。系统支持默认的权限定义，企业可以根据实际情况选择默认权限。管理员和私有设备所属客户可以对已经授权设备进行不同权限设备设置，以更好和更安全地控制远程设备。

删除设备权限：对于违约或者未缴费客户，管理员可以删除他们对栽设备的权限。删除后，若客户正在观看该设备，会立即被停止连接。



（ 4）会话管理 :

可强制断开会话，管理员可以通过这一功能实现异常连接或者错误客户的连接。  



###　系统架构  



本系统主要分为农业大棚现场、数据传感器、控制系统 和 业务平台四层架构。

农业大棚现场主要负责 现场环境参数的采集 和 设备智能控制，数据采集主要包括农业生产所需的光照、空气温度、空气湿度、土壤温度、土壤含水量等数值。

数据传感器的数据上传采用无线 ZigBee 模式，具有部署灵活、扩展方便等优点，用户访问采用 3G 无线访问方式。

控制系统由 边缘网关、 执行设备 和 相关线路组成， 通过边缘网关可以自由控制各种农业生产执行设备，包括 喷水系统 和 空气调节系统等。  

业务平台负责功能展示，主要功能包括视频监测、空间/时间分布、历史数据、错误报警和远程控制五个方面  



## 智能楼宇系统



智能楼宇节能改造项目是结合 IPv6 技术和物联网技术的楼宇节能项目，通过改造照明系统、空调系统来挖掘节能潜力。

为满足绿色环保、智能控制的迫切需求，部署实施了集成网络设备、无线传感器、照明及控制设备、楼宇空调控制设备、智能电表、 IP 摄像机、平台模块、数据测量、可视化软件等



![image-20200828230646312](https://gitee.com/cpu_code/picture_bed/raw/master//20200828230646.png)



###  走廊、电梯间的照明系统改造



将传统照明器具替代为目前最先进的 LED 照明设备，配以高效稳定的照明控制设备.

通过**红外人感无线传感器**实时感应人流变动和光线亮度，然后再根据系统预设的阈值进行判定，及时自动控制灯具开关，改变了以往 24 小时长明状态，有效降低了电耗，避免了不必要的能源流失。

照明系统改造中涉及的设备主要有：光照传感器、人感传感器、电流传感器、采集控制一体设备、网络设备等。  



### 机房的空调系统改造



对于机房的空调系统改造，要求能够保持机房 24 小时恒温恒湿（按照规定的温湿度）状态，同时有效实现耗电量的减少。

通过在机房关键位置部署灵敏可靠的**温湿度无线传感器**和**无线接收机**来收集相关数据，将无线接收机接收的数据发送给 BACNet 网关， BACNet 网关将数据解析上传至互联网供用户访问或控制。

空调主板上安装**智能控制**芯片，通过 485 通信线缆连接至 BACNet 网关。

在已改造的空调供电线路中安装**智能电表**，实时监测空调能耗并通过 BACNet 网关上传至互联网。

而空调控制设备通过网关及时进行通信，实现空调数字自动化和智能优化控制。

空调系统改造中涉及的设备主要有：温度传感器、湿度传感器、接收机、 BACNet 网关、智能电表等  	



### 技术亮点  



1.  基于 IPv6 技术：确保网络高速有效、安全可靠。
2.  智能控制：通过各种传感器和控制设备，可及时有效监控，实现智能管理。
3.  数据采集：及时精准采集各种数据，为制订应对策略提供实时参考信息。
4.  统计计量：通过智能电表实现远程抄表，避免产生不必要的管理运营成本。
5.  远程操作：无须亲临现场也可有效分析，轻松实施各种应对策略。
6.  可视化操作界面：人性化界面实时掌控最新动态。  







# 传感器技术  





## 传感器概述  



### 传感器概念  









### 传感器特性  









## 传感器接口  



### SPI 接口  



SPI 接口的全称是“ `Serial Peripheral Interface`”，意为**串行外围接口**，是 Motorola 首先在其 MC68HCXX系列处理器上定义的。 

SPI 接口主要应用在 EEPROM、 Flash、实时时钟、 AD 转换器、数字信号处理器和数字信号解码器等。  

SPI 总线系统是一种**同步串行外设接口**，它可以使 MCU 与各种外围设备以**串行方式**进行通信以交换信息。

SPI 总线系统可直接与各个厂家生产的多种标准外围器件直接接口，该接口一般使用 4 条线：**串行时钟线**（ SCLK）、**主机输入/从机输出数据线** MISO、**主机输出/从机输入数据线** MOSI 和 **低电平有效的从机选择线** SS（有的 SPI 接口芯片带有**中断信号线** INT、 有的 SPI 接口芯片没有主机输出/从机输入数据线 MOSI）。

SPI 接口在 CPU 和外围低速器件之间进行同步串行数据传输， 在主器件的移位脉冲下， 数据按位传输，高位在前，低位在后，为**全双工通信**。

数据传输速度总体来说比 I2C 总线要快，可达到几 Mb/s。 SPI 接口是以**主从方式**工作的，这种模式通常有一个主器件和一个或多个从器件。其接口包括以下 4 种信号。

*    MOSI——主器件数据输出，从器件数据输入。
*    MISO——主器件数据输入，从器件数据输出。
*    SCLK—— 时钟信号，由主器件产生。
*    SS—— 从器件使能信号，由主器件控制，有的 IC 会标注为 CS（ Chip Select）。



在点对点的通信中， SPI 接口不需要进行寻址操作，且为全双工通信，显得简单高效。 

SPI 接口的一个缺点是没有指定的流控制，没有应答机制确认是否接收到数据。  



### I2C 接口  



I2C 总线定义 : 

I2C（ Inter-Integrated Circuit）总线是一种由 PHILIPS 公司开发的两线式**串行总线**，用于连接微控制器及其外围设备。 I2C 总线产生于在 20 世纪 80 年代，最初为音频和视频设备开发，如今主要在服务器中使用，其中包括单个组件状态的通信。

如管理员可对各个组件进行查询，以管理系统的配置或掌握组件的功能状态，如电源和系统风扇。可随时监控内存、硬盘、网络、系统温度等多个参数，增加了系统的安全性，方便了管理。

总线特点 : 

I2C 总线最主要的优点是其简单和有效。由于接口直接在组件之上，因此 I2C 总线占用的空间非常小，减少了电路板的空间和芯片引脚的数量，降低了互联成本。总线的长度可达 8m，并且能够以 10kbps 的最大传输速率支持 40 个组件。 

I2C 总线的另一个优点是，它支持多主控（Multimastering）， 其中任何能够进行发送和接收的设备都可以成为主总线。一个主控能够控制信号的传输和时钟频率。当然，在任何时间点上只能有一个主控。

工作原理 : 

I2C 总线是由**数据线 SDA** 和**时钟 SCL** 构成的串行总线，可发送和接收数据。

在 CPU 与被控 IC 之间、IC 与 IC 之间进行双向传送，最高传输速率 100kbps。各种被控制电路均并联在这条总线上，但就像电话机一样只有拨通各自的号码才能工作，所以每个电路和模块都有唯一的地址，在信息的传输过程中， I2C 总线上并接的每一模块电路既是主控器（或被控器），又是发送器（或接收器），这取决于它所要完成的功能。

CPU 发出的控制信号分为**地址码**和**控制量**两部分，地址码用来选址即接通需要控制的电路，确定控制的种类；控制量决定该调整的类别（对比度、亮度）及需要调整的量。这样，各控制电路虽然挂在同一条总线上，却彼此独立，互不相关。

I2C 总线在传送数据过程中共有 3 种类型信号，它们分别是**开始信号**、**结束信号**和**应答信号**。

开始信号： SCL 为高电平时， SDA 由高电平向低电平跳变，开始传送数据。

结束信号： SCL 为高电平时， SDA 由低电平向高电平跳变，结束传送数据。

应答信号：接收数据的 IC 在接收到 8bit 数据后，向发送数据的 IC 发出特定的低电平脉冲，表示已收到数据。 CPU 向受控单元发出一个信号后，等待受控单元发出一个应答信号， CPU 接收到应答信号后，根据实际情况做出是否继续传递信号的判断。若未收到应答信号，由判断为受控单元出现故障。这些信号中，起始信号是必需的，结束信号和应答信号都可以不要。

目前有很多半导体集成电路上都集成了 I2C 接口。 带有 I2C 接口的单片机有： CYGNAL 的 C8051F0XX系列， PHILIP 的 SP87LPC7XX 系列， MICROCHIP 的 PIC16C6XX 系列等。很多外围器件如存储器、监控芯片等也提供 I2C 接口。  



### 串行接口  



串行接口简称串口，也称**串行通信接口**（通常指 COM 口），是采用串行通信方式的扩展接口。串口的出现是在 1980 年前后，数据传输速率为 115~230kbps。

串口出现的初期是为了实现连接计算机外设的目的，初期串口一般用来连接鼠标和外置 Modem 及老式摄像头和写字板等设备。串口也可以用于两台计算机（或设备）之间的互联及数据传输。由于串口不支持热插拔及传输速率较低，目前部分新主板和大部分便携式计算机已开始取消该接口，多用于工控和测量设备及部分通信设备中。

串口按照电气标准以及协议来分，包括 RS-232-C、 RS-422、 RS-485、 USB 等。 

RS-232-C、 RS-422 与RS-485 标准只对接口的电气特性做出规定，不涉及接插件、电缆或协议。 

USB 是最近几年发展起来的新型接口标准，主要应用于高速数据传输领域。  



 RS-232-C : 

RS-232-C 也称标准串口，最常用的一种串行通信接口。

它是在 1970 年由美国电子工业协会（ EIA）联合贝尔系统、调制解调器厂家及计算机终端生产厂家共同制定的用于串行通信的标准。它的全名是“数据终端设备（ DTE）和数据通信设备（ DCE）之间串行二进制数据交换接口技术标准”。

传统的 RS-232-C接口标准有 22 根线，采用标准 25 芯 D 型插座（ DB25），后来使用简化为 9 芯 D 型插座（ DB9），现在 25芯插座已很少采用。RS-232 采取不平衡传输方式，即单端通信。

由于其发送电平与接收电平的差仅为 2~3V，所以其共模抑制能力差，再加上双绞线上的分布电容，其传送距离最大为约 15m，最高传输速率为 20kbps。 

RS-232是为点对点（即只用一对收发设备）通信而设计的，其驱动器负载为 3～7kΩ。所以 RS-232 适合本地设备之间的通信。



RS-422  : 



RS-422 标准全称是“平衡电压数字接口电路的电气特性”，它定义了接口电路的特性。典型的 RS-422是四线接口。实际上还有一根信号地线，共 5 根线。由于接收器采用高输入阻抗和发送驱动器比 RS-232更强的驱动能力， 故允许在相同传输线上连接多个接收结点， 最多可接 10 个结点。 即一个主设备（ Master），其余为从设备（ Slave），从设备之间不能通信，所以 RS-422 支持点对多的双向通信。接收器输入阻抗为4kΩ，故发端最大负载能力是 10× 4kΩ+100Ω（终接电阻）。 RS-422 四线接口由于采用单独的发送和接收通道，因此不必控制数据方向，各装置之间任何必需的信号交换均可以按软件方式（ XON/XOFF 握手）或硬件方式（一对单独的双绞线）实现。 RS-422 的最大传输距离为 1219m，最大传输速率为 10Mb/s。其平衡双绞线的长度与传输速率成反比，在 100kbps 速率以下，才可能达到最大传输距离。只有在很短的距离下才能获得最高速率传输。一般 100m 长的双绞线上所能获得的最大传输速率仅为 1Mbps。



RS-485 : 

RS-485 是从 RS-422 基础上发展而来的，所以 RS-485 的许多电气规定与 RS-422 相仿。如都采用平衡传输方式，都需要在传输线上接终接电阻等。 RS-485 可以采用二线与四线方式，二线制可实现真正的多点双向通信，而采用四线连接时，与 RS-422 一样只能实现点对多的通信，即只能有一个主（ Master）设备，其余为从设备，但它比 RS-422 有改进，无论四线还是二线连接方式，总线上最多可接 32 个设备。RS-485 与 RS-422 的不同还在于其共模输出电压， RS-485 在-7V~+12V 之间，而 RS-422 在-7V~+7V之间。 RS-485 接收器最小输入阻抗为 12kΩ、 RS-422 是 4kΩ。由于 RS-485 满足所有 RS-422 的规范，所以RS-485 的驱动器可以用在 RS-422 网络中应用。RS-485 与 RS-422 一样，其最大传输距离约为 1219m，最大传输速率为 10Mbps。平衡双绞线的长度与传输速率成反比，在 100kbps 速率以下，才可能使用规定最长的电缆长度。只有在很短的距离下才能获得最高传输速率。一般 100m 双绞线最大传输速率仅为 1Mbps。



USB : 

USB 是英文 Universal Serial Bus（通用串行总线）的缩写，是在 1994 年底由英特尔、康柏、 IBM、Microsoft 等多家公司联合推出的新型外设接口标准。 

USB 用一个 4 针（ USB3.0 标准为 9 针）插头作为标准插头，采用菊花链形式可以把所有的外设连接起来。 USB 接口可用于连接多达 127 个外设，如鼠标、调制解调器和键盘等。 

USB 接口速度快、 连接简单、 不需要外接电源， 传输速率 12Mbps， USB2.0 可达到480Mbps；电缆最大长度 5m， USB 电缆有 4 条线： 2 条信号线， 2 条电源线，可提供 5V 电源， USB 电缆分为屏蔽和非屏蔽两种。  







