<!--
 * @Author: cpu_code
 * @Date: 2020-06-25 22:22:05
 * @LastEditTime: 2020-06-27 23:04:40
 * @FilePath: \md\音视频\audio音频\wave音频数据的格式.md
 * @Gitee: https://gitee.com/cpu_code
 * @CSDN: https://blog.csdn.net/qq_44226094
--> 
 * @Author: cpu_code
 * @Date: 2020-06-25 22:22:05
 * @LastEditTime: 2020-06-27 23:03:46
 * @FilePath: \md\音视频\audio音频\wave音频数据的格式.md
 * @Gitee: https://gitee.com/cpu_code
 * @CSDN: https://blog.csdn.net/qq_44226094



<img src="https://s1.ax1x.com/2020/06/18/Nnpxmj.png" alt="Nnpxmj.png" title="Nnpxmj.png" />

# 粉丝不过W

## WAVE 文件格式剖析

WAVE文件 作为多媒体中使用的 **声波文件** 格式之一，它是以 RIFF 格式为标准的。

RIFF( Resource  Interchange File Format )，每个WAVE文件的头四个字节便是“ RIFF ”。

WAVE文件由 **文件头** 和 **数据体** 两大部分组成。

其中文件头又分为 **RIFF／WAV文件标识段** 和 **声音数据格式** 说明段两部分。

WAVE文件各部分内容在下表

**声音文件** 主要有两种，分别对应于 **单声道**（11.025KHz采样率、8Bit的采样值）和 **双声道**（44.1KHz采样率、16Bit的采样值）。

**采样率**是指：声音信号在 “ 模 → 数 ” 转换过程中单位时间内采样的次数。

**采样值**是指 :  每一次采样周期内声音模拟信号的积分值。

**单声道**声音文件，采样数据为八位的短整数（short int 00H-FFH）；

**双声道**立体声声音文件，每次采样数据为一个16位的整数（int），**高八位** 和 **低八位** 分别代表 左右两个声道。       

WAVE文件数据块包含以 **脉冲编码调制**（PCM）格式表示的样本。

WAVE文件是由 **样本 **组织而成的。

在**单声道**WAVE文件中，声道0 代表**左声道**，声道1代表**右声道**。

在**多声道**WAVE文件中，样本是交替出现的。



WAVE文件格式说明表　　 

| 文件头 | 偏移地址 | 字节数 | 数据类型 | 内 容 |
| :----: | :------: | :----: | :------: | :---: |
|        |   00H    |   4    | char | "RIFF"标志 |
|        |   04H    |   4    | long int | 文件长度 |
|        |   08H    |   4    | char | " WAVE " 标志 |
|        | 0CH |   4    | char | " fmt " 标志 |
|        | 10H |   4    |          | 过渡字节（不定） |
|        | 14H |   2    | int | 格式类别（10H 为PCM形式的声音数据) |
|        | 16H |   2    | int | 通道数，单声道为1，双声道为2 |
|        | 18H |   2    | int | 采样率（ 每秒样本数 ），表示每个通道的播放速度 |
|        | 1CH |   4    | long int | 波形音频数据传送速率 = 通道数 × 每秒数据位数 × 每样本的数据位数／8。播放软件利用此值可以估计 **缓冲区的大小** |
|        | 20H | 2 | int | 数据块的调整数（ 按字节算的 ）= 通道数 × 每样本的数据位值／8。播放软件需要一次处理多个该值大小的字节数据，以便将其值用于缓冲区的调整 |
|        | 22H | 2 |          | 每样本的数据位数，表示每个声道中各个样本的数据位数。如果有多个声道，对每个声道而言，样本大小都一样 |
|        | 24H | 4 | char | 数据标记符＂data＂ |
|        | 28H | 4 | long int |语音数据的长度  |


PCM数据的存放方式：  

|            |                  样本1                   |                  样本2                   |
| :--------: | :--------------------------------------: | :--------------------------------------: |
| 8位单声道  |                  0声道                   |                  0声道                   |
| 8位立体声  |       0声道（左）     1声道（右）        |       0声道（左）     1声道（右）        |
| 16位单声道 |      0声道低字节        0声道高字节      |     0声道低字节          0声道高字节     |
| 16位立体声 | 0声道（左）低字节      0声道（左）高字节 | 1声道（右）低字节      1声道（右）高字节 |



WAVE文件的每个样本值包含在一个整数 i 中，i 的长度为容纳指定样本长度所需的最小字节数。

首先存储 低有效字节，表示样本幅度的位放在 i 的高有效位上，剩下的位置为0，这样8位和16位的PCM波形样本的数据格式如下所示。

| 样本大小 |   数据格式   | 最大值 | 最小值 |
| :------: | :----------: | :----: | :----: |
|  8位PCM  | unsigned int |  225   |   0    |
| 16位PCM  |     int      | 32767  | -32767 |

​          

​                                         

​                                                      

​                    

 